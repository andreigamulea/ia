
    <div>
        <h2>Organizație Gazdă:</h2>
        <p><%=@nume_firma%></p>
        <p><%=@sediu_firma%></p>

        <h1>FIȘA POSTULUI</h1>
        <p>anexă la contractul de voluntariat</p>

        <h2>Denumire post: <%=@denumire_contract%></h2>
        <p>Nume și prenume voluntar: <input type="text" name="nume_voluntar" style="width: 300px;"></p>
        <p>Locul desfășurării activității de voluntariat: <%=@locul_desfasurarii_activitatii_voluntar%></p>
        <p>Departament: <%=@departament%></p>
        <p>Subordonare: coordonator <%=@coordonator_voluntar%></p>
        <p>Relații funcționale: <%=@relatii_functionale_voluntar%></p>
        <h3>Cerințe specifice postului:</h3>
        <ul>
            <li>disciplină, seriozitate, responsabilitate și atenție.</li>
        </ul>
        <h3>Scopul postului:</h3>
        <p>realizarea de activități în conformitate cu valorile promovate de asociație</p>
        <div>
        <h3>Sarcini și îndatoriri specifice:</h3> <!-- sarcinile trebuie puse in tabel despartite de ; -->
        <ul>
        <% @sarcini.each do |sarcina| %>
          <div>
            <li><%= sarcina %></li>
          </div>
        <% end %>
        </ul>

        <h3>Protecția datelor cu caracter personal</h3>
        <ul>
            <li>Informează în mod corect și complet cu privire la scopurile pentru care vor fi prelucrate datele personale.</li>
            <li>Informează în mod corect și complet cu privire la tipul de date personale care vor fi prelucrate.</li>
            <li>Informează în mod corect și complet cu privire la durata prelucrării datelor (perioada de stocare a datelor).</li>
            <li>Informează în mod corect și complet cu privire la drepturile privind datele cu caracter personal (dreptul la informare, dreptul de acces la informațiile prelucrate, dreptul la rectificare, dreptul la ștergerea datelor, dreptul la restricționarea prelucrării, dreptul la opoziție), în conformitate cu reglementările organizației, privind protecția datelor personale.</li>
            <li>Informează în mod corect și complet cu privire la drepturile și obligațiile operatorului (organizația gazdă).</li>
            <li>Informează în mod corect și complet cu privire la consecințele refuzului de a-i fi prelucrate datele personale, așa cum sunt acestea stipulate în regulamentele organizației.</li>
            <li>Consimțământul este obținut în scris, conform reglementărilor asociației (operator) și utilizând formularele puse la dispoziție de acesta.</li>
        </ul>

        <h3>Responsabilități ale postului:</h3>
        <ul>
            <li>Răspunde pentru neîndeplinirea sau îndeplinirea necorespunzătoare a atribuțiilor ce-i revin.</li>
            <li>Răspunde pentru eventualele prejudicii produse ca efect al activității sale.</li>
            <li>Răspunde de păstrarea confidențialității informațiilor.</li>
            <li>Răspunde de păstrarea documentelor legate de activitățile asociației.</li>
            <li>Răspunde de utilizarea resurselor puse la dispoziție exclusiv în interesul acesteia.</li>
            <li>Respectă prevederile normativelor interne și procedurile de lucru privitoare la postul său.</li>
        </ul>

        <h3>Autoritatea postului:</h3>
        <ul>
            <li>În cadrul domeniului de activitate pe care o desfășoară, conform atribuțiilor, sarcinilor, Regulamentului Intern și deciziilor organizației gazdă.</li>
            <li>Informeză  și se consultă cu coordonatorul de voluntari în cazul situațiilor deosebite sau a celor care pot depăși sfera competențelor sale de rezolvare.</li>
        </ul>

        <h3>Condiții de lucru:</h3>
        <p>Program de activități conform precizărilor organizației.</p>

        <h3>Facilități:</h3>
        <p>Se asigură, la cerere, de către organizația gazdă, hrană rece; decontarea cheltuielilor de transport efectuate în scopul desfășurării activităților organizației gazdă.</p>

        <h3>Sancțiuni:</h3>
        <ul>
            <li>Nerespectarea responsabilităților și atribuțiilor postului, a cerințelor de etică, se sancționează conform Regulamentului de ordine interioară.</li>
            <li>Dacă este cazul, răspunde potrivit dispozițiilor legale în vigoare, putând fi obligat și plata de daune în raport cu prejudiciile aduse.</li>
        </ul>

        <div class="semnatura">
 
        
        <div class="gazda">
        <p><%=@nume_firma%>,</p>
        <p style="margin-top: -15px; border: 2px solid transparent; border-left: none;"><%= @reprezentant_firma %></p>
        <img src="<%= @semnatura_admin %>" alt="Semnătura reprezentantului AMN-ROMANIA" style="border: none;">
        </div>
    
            
            
        <div class="voluntar">
            <p>Voluntar: </p>
            <p style="margin-top:-15px;">
            <span id="nume-voluntar-destinatie" style="width: -webkit-fill-available; padding-left:5px;">
            <% if @show_submit_button %>
                <%#= @contracte_useri.nume_voluntar %>
                ...............
            <%else%>    

              ...............
            <%end%>    
            </span>
            </p>
            <canvas id="signature-pad-3" width="auto" height="auto" style="border: 1px solid #000;"></canvas>
            <button type="button" onclick="clearSignature(2)", class="register">Șterge Semnătura</button>
        </div>
      
    
        </div>
        
        <style>
    
        .contract-section {
            box-sizing: border-box;
        }
        
        
        .organization-info, .contract-intro {
            margin-bottom: 15px;
        }
        
        .form-label {
            display: inline-block; /* Aliniere în linie cu inputurile */
            margin-right: 5px; /* Spațiere între etichetă și input */
            vertical-align: middle; /* Centrare verticală în raport cu inputurile */
        }
        
        .form-input {
            width: auto; /* Lățime ajustată pentru a permite două inputuri pe rând */
            padding: 8px;
            margin-bottom: 10px;
            box-sizing: border-box;
            display: inline-block; /* Afișare în linie pentru aliniere cu etichetele */
            min-width: 290px;
          }
        
        @media screen and (max-width: 600px) {
            .form-input, .form-label {
                width: 100%; /* Lățime completă pe ecrane mici pentru o mai bună vizibilitate */
                display: block; /* Afișare pe rânduri separate pe ecrane mici */
                margin-right: 0;
            }
        }
        
        #cvp1 h1{
            font-size:25px; 
            margin:0 auto; 
            padding:25px 10px;
            width: max-content;
        }
        #cvp1 h2, #cvp1 h3{
            font-size: 18px;
        }
        #cvp1 .form-label {
            margin-bottom: 0;
        }
        #cvp1 button{
            border: 1px solid #4b0082; 
            background-color: #4b0082;
        }
        .semnatura {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            text-align:center;
        }
    
        .gazda, .voluntar {
            max-width: 300px;
            flex: 1; /* Permite ca div-urile să se ajusteze în funcție de spațiul disponibil */
        }
    
        .gazda canvas, .voluntar canvas {
            border: 1px solid #000;
            
        }
    
        button {
            display: block;
            margin-top: 10px;
        }
        .cr{
            word-wrap: break-word;
        }
    
        /* Media query pentru ecrane cu lățime mai mică de 720px */
        @media (max-width: 925px) {
            .gazda, .voluntar {
                max-width: none;
                flex-basis: 100%;
            }
            .voluntar {
                margin-top: 20px;
            }
        }
    
        /* Media query pentru ecrane foarte înguste */
        @media (max-width: 300px) {
            .gazda, .voluntar {
                padding: 0;
                margin: 0;
            }
    
            .gazda canvas, .voluntar canvas {
                max-height: 150px; /* Reduce înălțimea canvas-ului pentru ecrane mici */
            }
        }
    </style>
    
    <script>
    document.addEventListener("turbo:load", function() {
      initializeSignaturePad('signature-pad-3'); // Inițializează doar al doilea canvas
      
      var form = document.querySelector('form');
      form.addEventListener('submit', function() {
        saveSignatureOnSubmit('signature-pad-3', 'semnatura_voluntar'); // Folosește ID-ul corect al canvas-ului și câmpului ascuns
      });
      
      synchronizeFields('nume-voluntar-sursa',  'nume-voluntar-destinatie');
    });
    
    function synchronizeFields(sourceFieldId, targetElementId) {
        var sourceField = document.getElementById(sourceFieldId);
        var targetElement = document.getElementById(targetElementId);
    
        if (sourceField && targetElement) {
            sourceField.addEventListener('input', function() {
                // Verifică dacă elementul țintă este un câmp de input sau alt tip de element
                if ('value' in targetElement) {
                    // Pentru elemente de input, textarea, etc.
                    targetElement.value = sourceField.value;
                } else {
                    // Pentru elemente non-input, cum ar fi span, div, etc.
                    targetElement.textContent = sourceField.value;
                }
            });
        }
    }
    
    
    function saveSignatureOnSubmit(canvasId, hiddenFieldId) {
        var canvas = document.getElementById(canvasId);
        if (canvas) {
            var dataURL = canvas.toDataURL();
            document.getElementById(hiddenFieldId).value = dataURL; // Setează valoarea câmpului ascuns
        }
    }
    
    
    function initializeSignaturePad(canvasId) {
      var canvas = document.getElementById(canvasId);
      if (canvas) {
        var context = canvas.getContext('2d');
        var isDrawing = false;
    
        function startDrawing(event) {
          event.preventDefault(); // Împiedică derularea în timpul desenării
          isDrawing = true;
          var rect = canvas.getBoundingClientRect();
          var x = (event.clientX || event.touches[0].clientX) - rect.left;
          var y = (event.clientY || event.touches[0].clientY) - rect.top;
          context.beginPath();
          context.moveTo(x, y);
        }
    
        function continueDrawing(event) {
          event.preventDefault(); // Împiedică derularea în timpul desenării
          if (!isDrawing) return;
          var rect = canvas.getBoundingClientRect();
          var x = (event.clientX || event.touches[0].clientX) - rect.left;
          var y = (event.clientY || event.touches[0].clientY) - rect.top;
          context.lineTo(x, y);
          context.stroke();
        }
    
        function stopDrawing(event) {
          if (isDrawing) {
            event.preventDefault();  // Împiedică derularea și alte acțiuni implicite
            event.stopPropagation(); // Opriți propagarea evenimentului
            isDrawing = false;
          }
        }
    
        // Evenimente pentru mouse
        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('mousemove', continueDrawing);
        canvas.addEventListener('mouseup', stopDrawing);
        canvas.addEventListener('mouseleave', stopDrawing);
    
        // Evenimente pentru touch (ecran tactil)
        canvas.addEventListener('touchstart', startDrawing);
        canvas.addEventListener('touchmove', continueDrawing);
        canvas.addEventListener('touchend', stopDrawing);
      }
    }
    
    
    function loadExistingSignature(canvasId) {
      var canvas = document.getElementById(canvasId);
      var context = canvas.getContext('2d');
      var existingSignature = "<%= @semnatura_admin %>";
    
      if (existingSignature) {
        var image = new Image();
        image.onload = function() {
          context.drawImage(image, 0, 0);
        };
        image.src = existingSignature;
      }
    }
    
    function saveSignature(padNumber) {
      var canvas = document.getElementById('signature-pad-3');
      var dataURL = canvas.toDataURL();
      console.log(dataURL);
      // Trimite dataURL la server
    }
    
    function clearSignature(padNumber) {
      var canvas = document.getElementById('signature-pad-3');
      var context = canvas.getContext('2d');
      context.clearRect(0, 0, canvas.width, canvas.height);
    }
    
    </script>
    